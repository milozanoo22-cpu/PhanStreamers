<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Plataforma de apoyo mutuo entre streamers de Twitch">
    <title>Phanstreamers - Plataforma de Apoyo Mutuo</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Pantalla de Login -->
    <div id="loginScreen" class="login-screen">
        <div class="login-container">
            <div class="login-logo">
                <h1>🎮 StreamSupport</h1>
                <p>Plataforma de Apoyo Mutuo entre Streamers</p>
            </div>
            
            <div class="login-card">
                <div class="pixel-decoration">
                    <div class="pixel-block"></div>
                    <div class="pixel-block"></div>
                    <div class="pixel-block"></div>
                    <div class="pixel-block"></div>
                </div>
                
                <h2>🔐 Bienvenido</h2>
                <p>Inicia sesión con tu cuenta de Twitch para comenzar a apoyar y ser apoyado por la comunidad</p>
                
                <button class="btn-twitch" onclick="authenticateWithTwitch()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M11.571 4.714h1.715v5.143H11.57zm4.715 0H18v5.143h-1.714zM6 0L1.714 4.286v15.428h5.143V24l4.286-4.286h3.428L22.286 12V0zm14.571 11.143l-3.428 3.428h-3.429l-3 3v-3H6.857V1.714h13.714z"/>
                    </svg>
                    Conectar con Twitch
                </button>
                
                <div id="loginStatus" class="login-status">
                    <p>✨ Conecta tu cuenta para acceder a todas las funcionalidades</p>
                </div>
            </div>
            
            <div class="login-features">
                <div class="feature-item">
                    <span class="feature-icon">📺</span>
                    <span>Ve streamers en vivo</span>
                </div>
                <div class="feature-item">
                    <span class="feature-icon">⭐</span>
                    <span>Gana puntos apoyando</span>
                </div>
                <div class="feature-item">
                    <span class="feature-icon">🏆</span>
                    <span>Ranking de apoyadores</span>
                </div>
                <div class="feature-item">
                    <span class="feature-icon">📅</span>
                    <span>Agenda tus horarios</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Aplicación Principal -->
    <div id="mainApp" class="main-app" style="display: none;">
        <!-- Header con info del usuario -->
        <header class="app-header">
            <div class="header-content">
                <div class="logo-small">
                    <h1>🎮 StreamSupport</h1>
                </div>
                
                <div class="user-info">
                    <img id="userAvatar" src="" alt="Avatar" class="user-avatar">
                    <div class="user-details">
                        <span id="userName" class="user-name">Usuario</span>
                        <span id="userPoints" class="user-points">⭐ 0 puntos</span>
                    </div>
                    <button class="btn-logout" onclick="logout()">Cerrar Sesión</button>
                </div>
            </div>
        </header>

        <!-- Navegación Principal -->
        <nav class="main-nav">
            <button class="nav-btn active" onclick="showSection('streamers')" data-section="streamers">
                <span class="nav-icon">🔴</span>
                <span class="nav-text">Streamers En Vivo</span>
            </button>
            <button class="nav-btn" onclick="showSection('ranking')" data-section="ranking">
                <span class="nav-icon">🏆</span>
                <span class="nav-text">Ranking & Puntos</span>
            </button>
            <button class="nav-btn" onclick="showSection('agenda')" data-section="agenda">
                <span class="nav-icon">📅</span>
                <span class="nav-text">Mi Agenda</span>
            </button>
        </nav>

        <!-- Contenedor de Secciones -->
        <div class="app-content">
            <!-- Sección: Streamers En Vivo -->
            <section id="streamers" class="content-section active">
                <div class="section-header">
                    <h2>🔴 Streamers En Vivo</h2>
                    <button class="btn-refresh" onclick="refreshLiveStreams()">🔄 Actualizar</button>
                </div>
                
                <div class="stats-banner">
                    <div class="stat-item">
                        <span class="stat-number" id="liveCount">0</span>
                        <span class="stat-label">Streamers en vivo</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="totalViewers">0</span>
                        <span class="stat-label">Viewers totales</span>
                    </div>
                </div>

                <div id="liveStreamersGrid" class="streamers-grid">
                    <div class="loading">Cargando streamers en vivo...</div>
                </div>

                <!-- Sesión de Apoyo Activa -->
                <div id="activeSupportSession" class="support-session" style="display: none;">
                    <div class="session-header">
                        <h3>⚡ Sesión de Apoyo Activa</h3>
                        <button class="btn-stop" onclick="stopSupportSession()">⏹️ Finalizar</button>
                    </div>
                    <div id="sessionContent"></div>
                </div>
            </section>

            <!-- Sección: Ranking y Puntos -->
            <section id="ranking" class="content-section">
                <div class="section-header">
                    <h2>🏆 Top 10 Mejores Apoyadores</h2>
                    <button class="btn-refresh" onclick="refreshRanking()">🔄 Actualizar</button>
                </div>

                <div class="my-stats-card">
                    <div class="stats-grid">
                        <div class="stat-box">
                            <span class="stat-icon">⭐</span>
                            <div>
                                <span class="stat-value" id="myPoints">750</span>
                                <span class="stat-name">Mis Puntos</span>
                            </div>
                        </div>
                        <div class="stat-box">
                            <span class="stat-icon">📊</span>
                            <div>
                                <span class="stat-value" id="myPercentage">65%</span>
                                <span class="stat-name">Apoyo Dado</span>
                            </div>
                        </div>
                        <div class="stat-box">
                            <span class="stat-icon">🕐</span>
                            <div>
                                <span class="stat-value" id="myHours">2</span>
                                <span class="stat-name">Horas Disponibles</span>
                            </div>
                        </div>
                        <div class="stat-box">
                            <span class="stat-icon">#️⃣</span>
                            <div>
                                <span class="stat-value" id="myRank">-</span>
                                <span class="stat-name">Mi Posición</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="ranking-container">
                    <div id="rankingList" class="ranking-list">
                        <!-- El ranking se cargará aquí -->
                    </div>
                </div>
            </section>

            <!-- Sección: Mi Agenda -->
            <section id="agenda" class="content-section">
                <div class="section-header">
                    <h2>📅 Mi Agenda de Streaming</h2>
                    <div class="hours-available">
                        <span>Horas disponibles: <strong id="hoursAvailable">2/5</strong></span>
                    </div>
                </div>

                <div class="agenda-info">
                    <p>📊 Basado en tu <strong>65% de apoyo</strong>, puedes agendar <strong>2 horas</strong> esta semana</p>
                    <p>⏰ Horario disponible: <strong>8:00 AM - 11:00 PM</strong> (Hora Colombia)</p>
                </div>

                <div class="schedule-container">
                    <div id="scheduleGrid" class="schedule-grid">
                        <!-- El horario se generará aquí -->
                    </div>
                </div>

                <button class="btn-generate" onclick="generateSchedule()">🔄 Generar Horario Semanal</button>
            </section>
        </div>
    </div>

    <script src="streamers.js"></script>
</body>
</html>
